<!DOCTYPE html>
<html lang="es" class="no-js">
  <head>
    
    
    
    

    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Memoria dinámica (Heap) | Apuntes lenguaje C++">
      
      
        <link rel="canonical" href="https://docs.hektorprofe.net/cpp/07-punteros-memoria/07-memoria-dinamica/">
      
      
        <meta name="author" content="Héctor Costa Guzman">
      
      <link rel="shortcut icon" href="/favicon.ico">
    
    
      
        <title>Memoria dinámica (Heap) | Apuntes lenguaje C++ | Hektor Profe</title>
      
    
    <link rel="stylesheet" href="../../../assets/stylesheets/application.2.css">
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    
    <link rel="stylesheet" href="/assets/stylesheets/tingle.min.css">
<style>
@font-face{font-family:"Material Icons";font-style:normal;font-weight:400;src:local("Material Icons"),local("MaterialIcons-Regular"),url("/assets/fonts/specimen/MaterialIcons-Regular.woff2") format("woff2"),url("/assets/fonts/specimen/MaterialIcons-Regular.woff") format("woff"),url("/assets/fonts/specimen/MaterialIcons-Regular.ttf") format("truetype")}
[data-md-color-primary="grey"] .md-header { background-color: #191A1D }
[data-md-color-primary="grey"] .md-tabs { background-color: #222831 }
.md-footer-nav { background-color: #222831; }
.md-footer-meta { background-color: #191A1D }
html [data-md-color-primary="grey"] .md-nav--primary .md-nav__title--site { background-color: #191A1D; }
.mini{ display: none; } .maxi{ display: block; }
.embed-container { position: relative; padding-bottom: 56.25%;height: 0; overflow: hidden; max-width: 100%; height: auto; margin-bottom: 0; } 
.embed-container iframe, .embed-container object, .embed-container embed { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
.md-nav__link:focus, .md-nav__link:hover { color: #018dc5; }
.headerlink{ color: #018dc5 !important; }
.md-footer-links__highlight a{ color: #777 !important; }
.md-footer-links__highlight a:hover{ color: #ddd !important; }
.visible{ display: inherit !important; }
/*.md-tabs { display: none !important; }*/
.nav__btn, .nav__logo{ transition: 0.3s; }
.nav__btn:hover{ color: #aaa; }
.nav__logo:hover{ opacity:.7; }
.nav__logo {max-width: 225px !important; }
img:not([src]){visibility:hidden;}
img.click{opacity: 0.96;box-shadow:rgb(79, 82, 92) -4px 4px}
img.click:hover{opacity: 1;box-shadow:rgb(10, 172, 237) -4px 4px}
.button { background-color: #36bf2d; border: none; color: white !important; padding: 20px 0px; text-align: center; text-decoration: none; display: block; font-size: 97%; width: 100%; font-weight: bold;}
.button:hover { background-color: #4CAF50; color: white; }
.animated.delay-1dot5s {animation-delay: 1.5s;}
.md-icon--search { display:inline-block!important}
a.headerlink{ display: none !important; }
small.edited { display: block; text-align: right; }
#cookie-bar { padding: 1.8rem 1.25rem !important; background: #191A1D  !important; box-shadow:rgba(0, 0, 0, 0.2) 4px 4px 8px 8px; }
#cookie-bar-prompt-logo{ display: none !important; }
div.my-img{text-align:center;margin-top:20px}
@media (max-width: 76.1875em){ .mini{ display: block; } .maxi{ display: none;} /*.md-nav__link[for="nav-1"] { display: none; }*/ }
@media (min-width: 1599.9px){ .md-header-nav__button.md-logo img { height: 37.5px !important; width: 220px; } }
@media (min-width: 1999.9px){ .md-header-nav__button.md-logo img { height: 40px !important; width: 240px; } }
/* Rectificación footer en paginas pequeñas de altura */
@media (max-width: 1599.8px){ .md-container {height: calc(100% - 48px)} }
@media (min-width: 1599.9px){ .md-container {height: calc(100% - 53px)} }
@media (min-width: 1999.9px){ .md-container {height: calc(100% - 58px)} }
@media only screen and (max-width: 959.9px) { .nav__logo { display: block !important; }} 
@media only screen and (min-width: 960px) and (max-width: 76.1875em) { .nav__logo { display: block !important; }} 
@media only screen and (min-width: 76.1875em) { .nav__logo { display: none !important; } } 
@media only screen and (max-width: 76.1875em) { .md-sidebar--primary { left: -26.2rem;; width: 26.2rem; }  [data-md-toggle="drawer"]:checked ~ .md-container .md-sidebar--primary { -webkit-transform: translateX(26.2rem); transform: translateX(26.2rem); } [dir="rtl"] [data-md-toggle="drawer"]:checked ~ .md-container .md-sidebar--primary { -webkit-transform: translateX(-26.2rem); transform: translateX(-26.2rem); } }
@media (min-width: 1219.9px){ #home__btn { display: none !important; } #cursos__btn{ color: white !important; } [data-md-color-primary="grey"] .md-nav__link--active{ color: rgba(0, 0, 0, 0.87); text-decoration: underline !important; } }
@media (min-width: 467.9px){ #discord__btn{ display: inline-block !important; } }
@media only screen and (min-width: 60em){ .md-search__input { background-color: rgb(53, 54, 56); } .md-search__input:hover { background-color: rgb(84, 87, 93); color: white; }}
@media (max-width: 1219.9px){ .md-header-nav__title{ padding: 0 1rem; } .nav__btn {display:none;} }
@media (max-width: 875.9px){ #cookie-bar-button{ margin-top: 20px !important; }}
@media (max-width: 719.9px){ #cookie-bar { padding: 3.25rem 1.25rem; }}
@media (max-width: 512.9px){ #cookie-bar { padding: 2rem 1.25rem; }}

.tingle-modal { font-size:18px !important;}
.tingle-modal-box{ width: 80%; max-width: 1100px; }
.tingle-btn--danger{ background: darkorange !important; }
.tingle-modal-box__content { padding: 3rem 2rem 3rem 3rem;}
@media (max-width: 540px){ .tingle-modal-box{ width: auto; } }
@media (max-width: 849px){ #supermodal{ grid-template-columns:100% !important; }}

.md-sidebar--secondary .md-sidebar__scrollwrap {max-height: calc(100% - 275px - 60px)}
@media (max-width: 1999.9px){.md-sidebar--secondary .md-sidebar__scrollwrap {max-height: calc(100% - 246px - 60px);margin-right:-1px;}}
@media (max-width: 1599.9px){.md-sidebar--secondary .md-sidebar__scrollwrap {max-height: calc(100% - 222px - 60px)}}

</style>
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="grey" data-md-color-accent="grey">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#memoria-dinamica-heap-en-c" tabindex="1" class="md-skip">
        Saltar a contenido
      </a>
    
    
      <header
  class="md-header"
  data-md-component="header"
  style="position: inherit !important"
>
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a
          href="/"
          title="Hektor Profe"
          class="md-header-nav__button md-logo"
          style="font-size: 0px"
        >
          <img
            src="/assets/images/logo.png"
            width="200px"
            height="35px"
            style="margin-top: -5px"
            alt="Hektor Profe"
            title="Hektor Profe"
          />
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label
          class="md-icon md-icon--menu md-header-nav__button"
          for="__drawer"
        ></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div
          class="md-flex__ellipsis md-header-nav__title"
          data-md-component="title"
          style="text-align: right"
        >
          <!-- https://fontawesome.com/v4.7.0/ -->
          <a 
            class="nav__btn" 
            href="https://www.hektorprofe.net/" 
            style="margin-left:0em;" 
            title="Cursos de Hektor Profe">
            Cursos
          </a>
          <a 
            class="nav__btn" 
            href="https://docs.hektorprofe.net/" 
            style="margin-left:1.4em;" 
            title="Documentos de Hektor Profe">
            Documentos
          </a>
          <a 
            class="nav__btn" 
            href="https://www.hektorprofe.net/portafolio/" 
            style="margin-left:1.4em;" 
            title="Portafolio de Hektor Profe">
            Portafolio
          </a>
          <a href="/"
            ><img
              class="nav__logo"
              src="/assets/images/logo.png"
              width="200px"
              height="35px"
              style="margin: 6px auto 0"
              alt="Hektor Profe"
              title="Hektor Profe"
          /></a>
        </div>
        <style>
          .md-sidebar[data-md-state="lock"] {
            top: 0rem !important;
          }
          .md-tabs {
            display: none !important;
          }
          .hde {
            display: inline-block;
          }
          .admonition.note > .superfences-tabs > label:hover,
          .headerlink {
            color: #018dc5 !important;
          }
          .admonition.info {
            font-size: 100%;
          }
          .admonition.info label {
            font-size: 91%;
          }
          .admonition.note > .admonition-title {
            display: none;
          }
          .image {
            text-align: center;
            margin-top: 25px;
          }
          .contenedor_youtube {
            position: relative !important;
            padding-bottom: 56.25% !important; /*panorámico*/
            padding-top: 0px !important;
            height: 0 !important;
            margin-top: -20px;
            margin-bottom: 25px;
          }
          .contenedor_youtube iframe {
            position: absolute !important;
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: 100% !important;
          }
        </style>
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container" style="padding-top: 0px !important;">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list" id="top__tabs">
        
          <li class="md-tabs__item"><a href="javascript://" class="md-tabs__link">&nbsp;</a></li>
        
          <li class="md-tabs__item"><a href="javascript://" class="md-tabs__link">&nbsp;</a></li>
        
          <li class="md-tabs__item"><a href="javascript://" class="md-tabs__link">&nbsp;</a></li>
        
          <li class="md-tabs__item"><a href="javascript://" class="md-tabs__link">&nbsp;</a></li>
        
          <li class="md-tabs__item"><a href="javascript://" class="md-tabs__link">&nbsp;</a></li>
        
          <li class="md-tabs__item"><a href="javascript://" class="md-tabs__link">&nbsp;</a></li>
        
          <li class="md-tabs__item"><a href="javascript://" class="md-tabs__link">&nbsp;</a></li>
        
          <li class="md-tabs__item"><a href="javascript://" class="md-tabs__link">&nbsp;</a></li>
        
          <li class="md-tabs__item"><a href="javascript://" class="md-tabs__link">&nbsp;</a></li>
        
          <li class="md-tabs__item"><a href="javascript://" class="md-tabs__link">&nbsp;</a></li>
        
          <li class="md-tabs__item"><a href="javascript://" class="md-tabs__link">&nbsp;</a></li>
        
      </ul>
    </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container" style="padding-top: 8px !important;">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap" id="md__sidebar__scroll">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title" for="__drawer" style="padding:0 !important;max-height:5.5rem;"></label>
  
  <ul class="md-nav__list" id="main__list" data-md-scrollfix>
    
      
    
      
    
      
    
      
    
      
    
        <!-- comprobación extra -->
         
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" checked>
    
    <label class="md-nav__link" for="nav-6">
      Apuntes C++
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Apuntes C++
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
            
            
            


  <li class="md-nav__item">
    <a href="../../" title="Índice del archivo" class="md-nav__link">
      Índice del archivo
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../../01-entorno-desarrollo/" title="Entorno de desarrollo" class="md-nav__link">
      Entorno de desarrollo
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../../02-primeros-pasos/" title="Primeros pasos" class="md-nav__link">
      Primeros pasos
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../../03-tipos-de-datos/" title="Tipos de datos" class="md-nav__link">
      Tipos de datos
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../../04-modificadores/" title="Modificadores" class="md-nav__link">
      Modificadores
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../../05-control-de-flujo/" title="Control del flujo" class="md-nav__link">
      Control del flujo
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../../06-arreglos-clasicos/" title="Arreglos clásicos" class="md-nav__link">
      Arreglos clásicos
    </a>
  </li>

        
            
            
            

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-8" type="checkbox" id="nav-6-8" checked>
    
    <label class="md-nav__link" for="nav-6-8">
      Punteros y memoria
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-8">
        Punteros y memoria
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
            
            
            


  <li class="md-nav__item">
    <a href="../01-primeros-pasos/" title="Primeros pasos" class="md-nav__link">
      Primeros pasos
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../02-null-nullptr-void0/" title="Nullptr, void* y ((void*)0)" class="md-nav__link">
      Nullptr, void* y ((void*)0)
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../03-punteros-constantes/" title="Punteros constantes" class="md-nav__link">
      Punteros constantes
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../04-arreglos-punteros/" title="Arreglos y punteros" class="md-nav__link">
      Arreglos y punteros
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../05-aritmetica-punteros/" title="Aritmética de punteros" class="md-nav__link">
      Aritmética de punteros
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../06-tipos-memoria-stack-heap/" title="Gestión de la memoria" class="md-nav__link">
      Gestión de la memoria
    </a>
  </li>

        
            
            
            

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Memoria dinámica (Heap)
      </label>
    
    <a href="./" title="Memoria dinámica (Heap)" class="md-nav__link md-nav__link--active" id="md__active_link">
      Memoria dinámica (Heap)
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Tabla de contenidos</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#reservar-y-liberar-memoria-dinamica" title="Reservar y liberar memoria dinámica" class="md-nav__link toc__link">
    Reservar y liberar memoria dinámica
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#punteros-colgantes-dangling-pointers" title="Punteros colgantes (dangling pointers)" class="md-nav__link toc__link">
    Punteros colgantes (dangling pointers)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-al-reservar-la-memoria-dinamica" title="Error al reservar la memoria dinámica" class="md-nav__link toc__link">
    Error al reservar la memoria dinámica
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#perdidas-de-memoria-memory-leaks" title="Pérdidas de memoria (memory leaks)" class="md-nav__link toc__link">
    Pérdidas de memoria (memory leaks)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arreglos-almacenados-dinamicamente" title="Arreglos almacenados dinámicamente" class="md-nav__link toc__link">
    Arreglos almacenados dinámicamente
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../08-referencias-arreglos/" title="Referencias y arreglos" class="md-nav__link">
      Referencias y arreglos
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../../08-cadenas-caracteres/" title="Cadenas de caracteres" class="md-nav__link">
      Cadenas de caracteres
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../../09-funciones/" title="Programación de funciones" class="md-nav__link">
      Programación de funciones
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../../10-function-templates/" title="Function templates" class="md-nav__link">
      Function templates
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-12" type="checkbox" id="nav-6-12">
    
    <label class="md-nav__link" for="nav-6-12">
      Programación de clases
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-12">
        Programación de clases
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
            
            
            


  <li class="md-nav__item">
    <a href="../../11-clases/01-primeros-pasos/" title="Primeros pasos" class="md-nav__link">
      Primeros pasos
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../../11-clases/02-funciones-clases-amigas/" title="Funciones y clases amigas" class="md-nav__link">
      Funciones y clases amigas
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../../11-clases/03-miembros-estaticos/" title="Miembros estáticos" class="md-nav__link">
      Miembros estáticos
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../../11-clases/04-sobrecarga-operadores/" title="Sobrecarga de operadores" class="md-nav__link">
      Sobrecarga de operadores
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../../11-clases/05-herencia-clases/" title="Herencia de clases" class="md-nav__link">
      Herencia de clases
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../../11-clases/06-polimorfismo-clases/" title="Polimorfismo de clases" class="md-nav__link">
      Polimorfismo de clases
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../../11-clases/07-class-templates/" title="Class templates" class="md-nav__link">
      Class templates
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../../12-punteros-inteligentes/" title="Punteros inteligentes" class="md-nav__link">
      Punteros inteligentes
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../../13-manejo-excepciones/" title="Manejo de excepciones" class="md-nav__link">
      Manejo de excepciones
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../../14-biblioteca-stl/" title="Biblioteca STL" class="md-nav__link">
      Biblioteca STL
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-16" type="checkbox" id="nav-6-16">
    
    <label class="md-nav__link" for="nav-6-16">
      Miscelánea
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-16">
        Miscelánea
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
            
            
            


  <li class="md-nav__item">
    <a href="../../30-miscelanea/01-conversiones-overflow/" title="Conversiones y overflows" class="md-nav__link">
      Conversiones y overflows
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../../30-miscelanea/02-operadores-bit-a-bit/" title="Operadores bit a bit" class="md-nav__link">
      Operadores bit a bit
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../../30-miscelanea/03-enumeradores-alias/" title="Enumeradores y alias" class="md-nav__link">
      Enumeradores y alias
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../../30-miscelanea/04-numeros-aleatorios/" title="Números aleatorios" class="md-nav__link">
      Números aleatorios
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../../30-miscelanea/05-tiempo-ejecucion/" title="Tiempo de ejecución" class="md-nav__link">
      Tiempo de ejecución
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../../30-miscelanea/06-espacio-nombres/" title="Espacio de nombres" class="md-nav__link">
      Espacio de nombres
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../../30-miscelanea/07-compilacion-vinculacion/" title="Compilación y vinculación" class="md-nav__link">
      Compilación y vinculación
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../../30-miscelanea/08-semanticas-movimiento/" title="Semánticas de movimiento" class="md-nav__link">
      Semánticas de movimiento
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../../30-miscelanea/09-funciones-entidades/" title="Funciones como entidades" class="md-nav__link">
      Funciones como entidades
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../../30-miscelanea/90-novedades-cpp20/" title="Novedades en C++20" class="md-nav__link">
      Novedades en C++20
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      
    
      
    
      
    
      
    
      
    
      
    
  </ul>
</nav>

                  </div>
                </div>
              </div>
            

            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                
                  
                    <div class="course-offer" style="margin-bottom:25px;padding:0px 10px;">
                      <a href="https://www.hektorprofe.net/cupon/python" target="_blank">
                        <img src="/cdn/assets/python.png" style="width:100%;justify-self:center;align-self:center;"/>
                      </a>
                    </div>
                  
                

                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Tabla de contenidos</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#reservar-y-liberar-memoria-dinamica" title="Reservar y liberar memoria dinámica" class="md-nav__link toc__link">
    Reservar y liberar memoria dinámica
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#punteros-colgantes-dangling-pointers" title="Punteros colgantes (dangling pointers)" class="md-nav__link toc__link">
    Punteros colgantes (dangling pointers)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-al-reservar-la-memoria-dinamica" title="Error al reservar la memoria dinámica" class="md-nav__link toc__link">
    Error al reservar la memoria dinámica
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#perdidas-de-memoria-memory-leaks" title="Pérdidas de memoria (memory leaks)" class="md-nav__link toc__link">
    Pérdidas de memoria (memory leaks)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arreglos-almacenados-dinamicamente" title="Arreglos almacenados dinámicamente" class="md-nav__link toc__link">
    Arreglos almacenados dinámicamente
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="memoria-dinamica-heap-en-c">Memoria dinámica (Heap) en C++<a class="headerlink" href="#memoria-dinamica-heap-en-c" title="Permanent link">&para;</a></h1>
<h2 id="reservar-y-liberar-memoria-dinamica">Reservar y liberar memoria dinámica<a class="headerlink" href="#reservar-y-liberar-memoria-dinamica" title="Permanent link">&para;</a></h2>
<p>La asignación dinámica de la memoria hace referencia a reservar un espacio en el montón (heap) para almacenar una información. Esta forma requiere el uso de la palabra reservada new para establecer el tamaño deseado del puntero:</p>
<div class="highlight"><pre><span></span><code><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">p_numero</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="p">;</span><span class="w">  </span><span class="c1">// Espacio reservado dinámicamente</span>
<span class="o">*</span><span class="n">p_numero</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">55</span><span class="p">;</span><span class="w">  </span><span class="c1">// Asignación en el espacio dinámico</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="o">*</span><span class="n">p_numero</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w">  </span><span class="c1">// 55</span>
</code></pre></div>
<p>La vida de los datos en el montón (heap) existe mientras el programador no los elimine manualmente de la memoria, por ello cuando no necesitemos más la información deberemos vaciar el espacio utilizando la palabra reservada <code>delete</code>, haciendo que el programa devuelva la memoria al sistema operativo:</p>
<div class="highlight"><pre><span></span><code><span class="k">delete</span><span class="w"> </span><span class="n">p_numero</span><span class="p">;</span><span class="w">  </span><span class="c1">// Vaciamos el espacio reservado</span>
</code></pre></div>
<p>También se sugiere que una vez vaciado el espacio le asignamos el puntero <code>nullptr</code> para indicar en el propio código un reseteo, eso nos indicará visualmente que debemos volver a reservar la memoria antes de utilizar el puntero:</p>
<div class="highlight"><pre><span></span><code><span class="n">p_numero</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span><span class="w">  </span><span class="c1">// Reiniciamos el puntero</span>
</code></pre></div>
<p>Por defecto el espacio reservado dinámicamente contiene información aleatoria, pero podemos asignar el valor directamente en la definición:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Reserva con asignación directa</span>
<span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">p_numero</span><span class="p">{</span><span class="kt">int</span><span class="p">(</span><span class="mi">55</span><span class="p">)};</span><span class="w">      </span>
<span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">p_numero</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="mi">55</span><span class="p">);</span><span class="w"></span>

<span class="c1">// Reserva con asignación uniforme</span>
<span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">p_numero</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="p">{</span><span class="mi">55</span><span class="p">};</span><span class="w"></span>
<span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">p_numero</span><span class="p">{</span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="p">{</span><span class="mi">55</span><span class="p">}};</span><span class="w"></span>
</code></pre></div>
<p>Por cierto, no debemos eliminar un puntero ya vaciado, podría pasar cualquier cosa en la memoria y dejar nuestro programa inservible:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// ¡CUIDADO AQUÍ!</span>
<span class="k">delete</span><span class="w"> </span><span class="n">p_numero</span><span class="p">;</span><span class="w"></span>
<span class="k">delete</span><span class="w"> </span><span class="n">p_numero</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>En resumen:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Variable en la pila (stack) gestionada automáticamente</span>
<span class="kt">int</span><span class="w"> </span><span class="n">numero</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"></span>

<span class="c1">// Puntero reservado dinámicamente en el montón (heap)</span>
<span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">p_numero</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="mi">55</span><span class="p">);</span><span class="w"></span>
<span class="c1">// Debemos vaciar la memoria manualmente</span>
<span class="k">delete</span><span class="w"> </span><span class="n">p_numero</span><span class="p">;</span><span class="w"></span>
<span class="c1">// Y recomendablemente asignarle nullptr para dejar un aviso</span>
<span class="n">p_numero</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<h2 id="punteros-colgantes-dangling-pointers">Punteros colgantes (dangling pointers)<a class="headerlink" href="#punteros-colgantes-dangling-pointers" title="Permanent link">&para;</a></h2>
<p>Un puntero colgante es un puntero que no apunta a una dirección de memoria válida, por lo que al intentar dereferenciarlo y utilizarlo, resultará en un comportamiento indefinido.</p>
<p>Esto es algo muy malo, pues se pueden generar situaciones imprevistas en el código y posiblemente un error de ejecución que termine con el programa bloqueado.</p>
<p>Hay tres tipos de punteros colgantes:</p>
<ul>
<li>Punteros no inicializados.</li>
<li>Punteros eliminados.</li>
<li>Múltiples punteros apuntando a la misma dirección de memoria.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1">// Puntero colgante por no inicialización</span>
<span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">p_numero</span><span class="p">;</span><span class="w">  </span>

<span class="c1">// Puntero colgante por eliminación</span>
<span class="k">delete</span><span class="w"> </span><span class="n">p_numero</span><span class="p">;</span><span class="w">  </span>

<span class="c1">// Dos punteros con la misma dirección de memoria</span>
<span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">ptr1</span><span class="w"> </span><span class="p">{</span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="p">{</span><span class="mi">10</span><span class="p">}};</span><span class="w">  </span>
<span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">ptr2</span><span class="w"> </span><span class="p">{</span><span class="n">ptr1</span><span class="p">};</span><span class="w"></span>
<span class="c1">// Vaciamos la memoria del primer puntero</span>
<span class="k">delete</span><span class="w"> </span><span class="n">ptr1</span><span class="p">;</span><span class="w"> </span>

<span class="n">ptr1</span><span class="p">;</span><span class="w"> </span><span class="c1">// Puntero colgante por eliminación</span>
<span class="n">ptr2</span><span class="p">;</span><span class="w"> </span><span class="c1">// Puntero colgante por referencia a un puntero eliminado</span>
</code></pre></div>
<p>Para prevenir los punteros colgantes podemos podemos aplicar estas directrices:</p>
<ul>
<li>Inicializar siempre los punteros.</li>
<li>Reiniciar los punteros después de eliminarlos con el valor <code>nullptr</code>.</li>
<li>Comprar que un puntero no es <code>nullptr</code> antes de utilizarlo.</li>
<li>En múltiples punteros con la misma dirección, asegurarnos de que la propiedad esté clara.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1">// Inicialización para evitar un puntero colgante</span>
<span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">p_numero</span><span class="p">{</span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="p">{</span><span class="mi">55</span><span class="p">}};</span><span class="w">  </span>

<span class="c1">// Reinicio de un puntero eliminado para evitar un puntero colgante</span>
<span class="k">delete</span><span class="w"> </span><span class="n">p_numero</span><span class="p">;</span><span class="w">  </span>
<span class="n">p_numero</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span><span class="w"></span>

<span class="c1">// Comprobación de un puntero nulo antes de utilizarlo</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">p_numero</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">)</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="o">*</span><span class="n">p_numero</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>

<span class="c1">// Establecer la jerarquía de punteros maestro-esclavo</span>
<span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">p_maestro</span><span class="p">{</span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="p">{</span><span class="mi">77</span><span class="p">}};</span><span class="w"></span>
<span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">p_esclavo</span><span class="p">{</span><span class="n">p_maestro</span><span class="p">};</span><span class="w"></span>
<span class="n">p_maestro</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span><span class="w"></span>
<span class="c1">// Solo acceder al valor del esclavo si el maestro es válido</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">p_maestro</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">)</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="o">*</span><span class="n">p_esclavo</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<h2 id="error-al-reservar-la-memoria-dinamica">Error al reservar la memoria dinámica<a class="headerlink" href="#error-al-reservar-la-memoria-dinamica" title="Permanent link">&para;</a></h2>
<p>De vez en cuando, en raras ocasiones, la reserva de memoria dinámica puede fallar, por ejemplo cuando no hay suficiente memoria disponible.</p>
<p>De forma predeterminada, cuando se utiliza el operador <code>new</code> para intentar asignar memoria y la función no puede hacerlo, se produce una excepción <code>bad_alloc</code>. Utilizando un bloque <code>try catch</code> podemos capturar la excepción y actuar en consecuencia:</p>
<div class="highlight"><pre><span></span><code><span class="k">try</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">int</span><span class="o">*</span><span class="w"> </span><span class="n">numeros</span><span class="w"> </span><span class="p">{</span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="p">[</span><span class="mi">100000000000000</span><span class="p">]};</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">exception</span><span class="o">&amp;</span><span class="w"> </span><span class="n">ex</span><span class="p">){</span><span class="w"></span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Error al reservar la memoria: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">ex</span><span class="p">.</span><span class="n">what</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>También es posible utilizar un modificador <code>nothrow</code> como argumento para que en lugar de fallar se devuelva un puntero nulo. Esta constante <code>nothrow</code> es un valor de tipo <code>nothrow_t</code> con el único propósito de no lanzar la excepción <code>bad_alloc</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">numeros</span><span class="p">{</span><span class="k">new</span><span class="w"> </span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">nothrow</span><span class="p">)</span><span class="w"> </span><span class="kt">int</span><span class="p">[</span><span class="mi">100000000000000</span><span class="p">]};</span><span class="w"></span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">numeros</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">)</span><span class="w"> </span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Memoria reservada correctamente&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"></span>
<span class="k">else</span><span class="w"></span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Error al reservar la memoria&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<h2 id="perdidas-de-memoria-memory-leaks">Pérdidas de memoria (memory leaks)<a class="headerlink" href="#perdidas-de-memoria-memory-leaks" title="Permanent link">&para;</a></h2>
<p>Un <strong>memory leak</strong> es una situación que puede ocasionar la pérdida del acceso a la memoria que hemos almacenado dinámicamente en el montón (heap).</p>
<p>Por ejemplo, si almacenamos una información en el montón y luego redireccionamos ese puntero a otra variable. En ese caso perderemos el acceso a la información original que seguirá almacenada en la memoria, es decir, habrá ocurrido un memory leak:</p>
<div class="highlight"><pre><span></span><code><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">p_numero</span><span class="p">{</span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="p">{</span><span class="mi">66</span><span class="p">}};</span><span class="w"> </span><span class="c1">// Reservamos memoria dinámica con un numero</span>
<span class="kt">int</span><span class="w"> </span><span class="n">numero</span><span class="p">{</span><span class="mi">99</span><span class="p">};</span><span class="w">             </span><span class="c1">// Definimos otro número</span>
<span class="n">p_numero</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">numero</span><span class="w"> </span><span class="p">;</span><span class="w">        </span><span class="c1">// Si redireccionamos el puntero al número</span>
<span class="w">                            </span><span class="c1">// la dirección con el 66 en el heap sigue</span>
<span class="w">                            </span><span class="c1">// existiendo pero hemos perdido su referencia,</span>
<span class="w">                            </span><span class="c1">// por lo que ha ocurrido un memory leak</span>
</code></pre></div>
<p>Esto no ocurre solo al sobreescribir la dirección de una variable en la pila (stack), pasará lo mismo al definir una nueva variable en el montón (heap):</p>
<div class="highlight"><pre><span></span><code><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">p_numero</span><span class="p">{</span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="p">{</span><span class="mi">66</span><span class="p">}};</span><span class="w"> </span><span class="c1">// Reservamos memoria dinámica</span>
<span class="n">p_numero</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="p">{</span><span class="mi">99</span><span class="p">};</span><span class="w">     </span><span class="c1">// Si redireccionamos el puntero</span>
<span class="w">                            </span><span class="c1">// perderemos la dirección original de 66,</span>
<span class="w">                            </span><span class="c1">// habrá ocurrido un memory leak</span>
</code></pre></div>
<p>Debemos prestar mucha atención a esto, sobretodo con las definiciones en bloques, pues fuera de ellos perderemos el acceso al puntero pero el valor seguirá existiendo en la memoria:</p>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">p_numero</span><span class="p">{</span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="p">{</span><span class="mi">66</span><span class="p">}};</span><span class="w">  </span><span class="c1">// Reservamos memoria en un bloque</span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">// En este punto fuera del bloque ya no podemos acceder al puntero,</span>
<span class="w">    </span><span class="c1">// si no lo hemos eliminamos antes ocurrirá un memory leak</span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Recordad siempre eliminar y reiniciar la memoria para garantizar espacio al sistema:</p>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">p_numero</span><span class="p">{</span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="p">{</span><span class="mi">66</span><span class="p">}};</span><span class="w"></span>

<span class="w">        </span><span class="k">delete</span><span class="w"> </span><span class="n">p_numero</span><span class="p">;</span><span class="w">     </span><span class="c1">// Borrado</span>
<span class="w">        </span><span class="n">p_numero</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span><span class="w">  </span><span class="c1">// Y reinicio</span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h2 id="arreglos-almacenados-dinamicamente">Arreglos almacenados dinámicamente<a class="headerlink" href="#arreglos-almacenados-dinamicamente" title="Permanent link">&para;</a></h2>
<p>Se trata de arreglos que se reservan en el montón (heap) mediante el operador <code>new</code>. Permiten el uso de la constante <code>std::nothrow</code> para evitar el error en caso de no disponer de la memoria requerida.</p>
<p>Podemos definir estos arreglos de distintas formas:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Definimos un tamaño para el arreglo</span>
<span class="kt">size_t</span><span class="w"> </span><span class="n">size</span><span class="p">{</span><span class="mi">10</span><span class="p">};</span><span class="w"></span>

<span class="c1">// Inicialización con sobrecarga creciente (los valores son basura)</span>
<span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">p_numeros</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">nothrow</span><span class="p">)</span><span class="w"> </span><span class="kt">int</span><span class="p">[</span><span class="n">size</span><span class="p">];</span><span class="w"></span>

<span class="c1">// Inicialización con sobrecarga no arrojadiza (los valores son 0)</span>
<span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">p_numeros</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">nothrow</span><span class="p">)</span><span class="w"> </span><span class="kt">int</span><span class="p">[</span><span class="n">size</span><span class="p">]{};</span><span class="w"></span>

<span class="c1">// Inicialización con asignación parcial (los demás valores son 0)</span>
<span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">p_numeros</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">nothrow</span><span class="p">)</span><span class="w"> </span><span class="kt">int</span><span class="p">[</span><span class="n">size</span><span class="p">]{</span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span><span class="w"> </span><span class="mi">33</span><span class="p">,</span><span class="w"> </span><span class="mi">44</span><span class="p">,</span><span class="w"> </span><span class="mi">55</span><span class="p">};</span><span class="w"></span>
</code></pre></div>
<p>Recordemos que mediante <code>std::nothrow</code> el puntero será <code>nullptr</code> en caso de no haber reservado la memoria correctamente, podemos comprobarlo directamente sin la igualdad, ya que se tomará como <code>0</code>:</p>
<div class="highlight"><pre><span></span><code><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">p_numeros</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Si no es un puntero nulo podemos utilizarlo sin problema</span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Para liberar la memoria de un arreglo dinámico debemos especificar los corchetes:</p>
<div class="highlight"><pre><span></span><code><span class="k">delete</span><span class="p">[]</span><span class="w"> </span><span class="n">p_numeros</span><span class="p">;</span><span class="w"></span>
<span class="n">p_numeros</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>Por último recordemos que estos arreglos al ser punteros no permiten la sintaxis del <code>for</code> con elementos porque no almacenan propiedades internas como su longitud:</p>
<div class="highlight"><pre><span></span><code><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">numero</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">p_numeros</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w">  </span><span class="c1">// esto no funcionará</span>
</code></pre></div>
<p>En su lugar deberemos recorrerlos mediante índices o con la aritmética de punteros mediante la suma de posición con un clásico <code>for</code> a partir de la longitud almacenada anteriormente:</p>
<div class="highlight"><pre><span></span><code><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">size</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">p_numeros</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w">      </span><span class="c1">// índices</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="o">*</span><span class="p">(</span><span class="n">p_numeros</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w">  </span><span class="c1">// aritmética</span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<hr />
<p><small class="edited"><i>Última edición: 08 de Mayo de 2022</i></small></p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-nav">
    <nav class="md-footer-nav__inner md-grid">
      
      <a
        href="../06-tipos-memoria-stack-heap/"
        title="Gestión de la memoria"
        class="md-flex md-footer-nav__link md-footer-nav__link--prev"
        rel="prev"
      >
        <div class="md-flex__cell md-flex__cell--shrink">
          <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
        </div>
        <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
          <span class="md-flex__ellipsis">
            <span class="md-footer-nav__direction">
              Anterior
            </span>
            Gestión de la memoria
          </span>
        </div>
      </a>
       
      <a
        href="../08-referencias-arreglos/"
        title="Referencias y arreglos"
        class="md-flex md-footer-nav__link md-footer-nav__link--next"
        rel="next"
      >
        <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
          <span class="md-flex__ellipsis">
            <span class="md-footer-nav__direction">
              Siguiente
            </span>
            Referencias y arreglos
          </span>
        </div>
        <div class="md-flex__cell md-flex__cell--shrink">
          <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
        </div>
      </a>
      
    </nav>
  </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        <!--<div class="md-footer-links__highlight">
          <a href="/comunidad/">Comunidad</a> · <a href="/politica-de-cookies/">Política de cookies</a> · <a href="/sobre-mi/">Sobre mí</a>
        </div>-->
        <div class="md-footer-copyright__highlight">
          2015 - 2022 &copy; Héctor Costa Guzmán (<u
            ><a
              href="https://creativecommons.org/licenses/by/4.0/deed.es"
              target="_blank"
              rel="nofollow"
              >Licencia CC BY 4.0</a
            ></u
          >)
        </div>
      </div>
       
<style>.md-footer-social__link {transition: 0.3s;}</style>
<div class="md-footer-social" style="font-size: 2.5rem; margin-top: -6px!important; padding: 0px!important; margin-bottom: -6px; overflow: hidden!important;">
  <a href="https://github.com/hcosta" title="Github" target="_blank" class="md-footer-social__link fa fa-github-square"></a>
  <a href="https://www.youtube.com/c/HektorProfe" title="Youtube" target="_blank" class="md-footer-social__link fa fa-youtube-square"></a>
  &nbsp;
</div>
 
    </div>
  </div>
  <script>
    (function (i, s, o, g, r, a, m) {
      i["GoogleAnalyticsObject"] = r;
      (i[r] =
        i[r] ||
        function () {
          (i[r].q = i[r].q || []).push(arguments);
        }),
        (i[r].l = 1 * new Date());
      (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m);
    })(
      window,
      document,
      "script",
      "https://www.google-analytics.com/analytics.js",
      "ga"
    );
    ga("create", "UA-124845547-1", "auto");
    ga("send", "pageview");
  </script>
</footer>
      
      <a id="anchorID" href="https://www.hektorprofe.net/" target="_blank"></a>
    </div>
  <script type='text/javascript' src="/assets/javascripts/application.a26c1c21.js"></script>
  <script src="/assets/javascripts/tingle.min.js"></script>
  <script type='text/javascript'>
    var modalButtonOnly = new tingle.modal({
        closeMethods: [],
        footer: true,
        stickyFooter: true
    });
    var btn5 = document.querySelector('.js-tingle-modal-5');

    // set content
    modalButtonOnly.setContent(`
    <div style="display:grid;grid-template-columns:32% 32% 32%;grid-column-gap: 1.33%;" id="supermodal">
      <div class="course">
        <a href="https://www.hektorprofe.net/cupon/python" target="_blank"><img src="/cdn/assets/python.png" style="width:100%;justify-self:center;align-self:center;"/></a>
      </div>
      <div class="course">
        <a href="https://www.hektorprofe.net/cupon/django" target="_blank"><img src="/cdn/assets/django.png" style="width:100%;justify-self:center;align-self:center;"/></a>
      </div>
      <div class="course">
        <a href="https://www.hektorprofe.net/cupon/pyside" target="_blank"><img src="/cdn/assets/pyside.png" style="width:100%;justify-self:center;align-self:center;"/></a>
      </div>
    </div>`);

    modalButtonOnly.addFooterBtn('Cerrar', 'tingle-btn tingle-btn--default tingle-btn--pull-right', function(){
      modalButtonOnly.close();
    });

    app.initialize({version:"1.2.3",url:{base:"../../.."}})
    var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.LazyLoad=e()}(this,function(){"use strict";function t(t,e,n){var o=e._settings;!n&&i(t)||(C(o.callback_enter,t),R.indexOf(t.tagName)>-1&&(N(t,e),I(t,o.class_loading)),E(t,e),a(t),C(o.callback_set,t))}var e={elements_selector:"img",container:document,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",class_loading:"loading",class_loaded:"loaded",class_error:"error",load_delay:0,callback_load:null,callback_error:null,callback_set:null,callback_enter:null,callback_finish:null,to_webp:!1},n=function(t){return _extends({},e,t)},o=function(t,e){return t.getAttribute("data-"+e)},r=function(t,e,n){var o="data-"+e;null!==n?t.setAttribute(o,n):t.removeAttribute(o)},a=function(t){return r(t,"was-processed","true")},i=function(t){return"true"===o(t,"was-processed")},s=function(t,e){return r(t,"ll-timeout",e)},c=function(t){return o(t,"ll-timeout")},l=function(t){return t.filter(function(t){return!i(t)})},u=function(t,e){return t.filter(function(t){return t!==e})},d=function(t,e){var n,o=new t(e);try{n=new CustomEvent("LazyLoad::Initialized",{detail:{instance:o}})}catch(t){(n=document.createEvent("CustomEvent")).initCustomEvent("LazyLoad::Initialized",!1,!1,{instance:o})}window.dispatchEvent(n)},f=function(t,e){return e?t.replace(/\.(jpe?g|png)/gi,".webp"):t},_="undefined"!=typeof window,v=_&&!("onscroll"in window)||/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),g=_&&"IntersectionObserver"in window,h=_&&"classList"in document.createElement("p"),b=_&&function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))&&0===t.toDataURL("image/webp").indexOf("data:image/webp")}(),m=function(t,e,n,r){for(var a,i=0;a=t.children[i];i+=1)if("SOURCE"===a.tagName){var s=o(a,n);p(a,e,s,r)}},p=function(t,e,n,o){n&&t.setAttribute(e,f(n,o))},y=function(t,e){var n=b&&e.to_webp,r=o(t,e.data_src),a=o(t,e.data_bg);if(r){var i=f(r,n);t.style.backgroundImage='url("'+i+'")'}if(a){var s=f(a,n);t.style.backgroundImage=s}},w={IMG:function(t,e){var n=b&&e.to_webp,r=e.data_srcset,a=t.parentNode;a&&"PICTURE"===a.tagName&&m(a,"srcset",r,n);var i=o(t,e.data_sizes);p(t,"sizes",i);var s=o(t,r);p(t,"srcset",s,n);var c=o(t,e.data_src);p(t,"src",c,n)},IFRAME:function(t,e){var n=o(t,e.data_src);p(t,"src",n)},VIDEO:function(t,e){var n=e.data_src,r=o(t,n);m(t,"src",n),p(t,"src",r),t.load()}},E=function(t,e){var n=e._settings,o=t.tagName,r=w[o];if(r)return r(t,n),e._updateLoadingCount(1),void(e._elements=u(e._elements,t));y(t,n)},I=function(t,e){h?t.classList.add(e):t.className+=(t.className?" ":"")+e},L=function(t,e){h?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\s+)"+e+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")},C=function(t,e){t&&t(e)},O=function(t,e,n){t.addEventListener(e,n)},k=function(t,e,n){t.removeEventListener(e,n)},x=function(t,e,n){O(t,"load",e),O(t,"loadeddata",e),O(t,"error",n)},A=function(t,e,n){k(t,"load",e),k(t,"loadeddata",e),k(t,"error",n)},z=function(t,e,n){var o=n._settings,r=e?o.class_loaded:o.class_error,a=e?o.callback_load:o.callback_error,i=t.target;L(i,o.class_loading),I(i,r),C(a,i),n._updateLoadingCount(-1)},N=function(t,e){var n=function n(r){z(r,!0,e),A(t,n,o)},o=function o(r){z(r,!1,e),A(t,n,o)};x(t,n,o)},R=["IMG","IFRAME","VIDEO"],S=function(e,n,o){t(e,o),n.unobserve(e)},M=function(t){var e=c(t);e&&(clearTimeout(e),s(t,null))},j=function(t,e,n){var o=n._settings.load_delay,r=c(t);r||(r=setTimeout(function(){S(t,e,n),M(t)},o),s(t,r))},D=function(t){return t.isIntersecting||t.intersectionRatio>0},T=function(t){return{root:t.container===document?null:t.container,rootMargin:t.thresholds||t.threshold+"px"}},U=function(t,e){this._settings=n(t),this._setObserver(),this._loadingCount=0,this.update(e)};return U.prototype={_manageIntersection:function(t){var e=this._observer,n=this._settings.load_delay,o=t.target;n?D(t)?j(o,e,this):M(o):D(t)&&S(o,e,this)},_onIntersection:function(t){t.forEach(this._manageIntersection.bind(this))},_setObserver:function(){g&&(this._observer=new IntersectionObserver(this._onIntersection.bind(this),T(this._settings)))},_updateLoadingCount:function(t){this._loadingCount+=t,0===this._elements.length&&0===this._loadingCount&&C(this._settings.callback_finish)},update:function(t){var e=this,n=this._settings,o=t||n.container.querySelectorAll(n.elements_selector);this._elements=l(Array.prototype.slice.call(o)),!v&&this._observer?this._elements.forEach(function(t){e._observer.observe(t)}):this.loadAll()},destroy:function(){var t=this;this._observer&&(this._elements.forEach(function(e){t._observer.unobserve(e)}),this._observer=null),this._elements=null,this._settings=null},load:function(e,n){t(e,this,n)},loadAll:function(){var t=this;this._elements.forEach(function(e){t.load(e)})}},_&&function(t,e){if(e)if(e.length)for(var n,o=0;n=e[o];o+=1)d(t,n);else d(t,e)}(U,window.lazyLoadOptions),U});
    var myLazyLoad = new LazyLoad({elements_selector: ".lazy"});
    const mdMenuItems = document.querySelectorAll('.md-nav__link');
    function doNav(){ document.getElementById("main__list").innerHTML = '<li class="md-nav__item"><a class="md-nav__link" href="/cursos/">Cursos</a></li><li class="md-nav__item"><a class="md-nav__link" href="/blog/">Blog</a></li>';}
    for (i = 0; i < mdMenuItems.length; i++) {  var item = mdMenuItems[i]; var htmlstring = item.innerHTML; htmlstring = (htmlstring.trim) ? htmlstring.trim() : htmlstring.replace(/^\s+/,''); if (htmlstring == 'Servidor de encuentro') { item.parentNode.removeChild(item);continue; }  if (htmlstring == 'Política de Cookies') { item.parentNode.removeChild(item);continue; } if (htmlstring == 'Buscador') { item.parentNode.removeChild(item); continue; } }
    try { var topPos = document.querySelector('#md__active_link').offsetTop; document.querySelector('#md__sidebar__scroll').scrollTop = topPos - 60; } catch (err) {}
  </script>
  </body>
</html>