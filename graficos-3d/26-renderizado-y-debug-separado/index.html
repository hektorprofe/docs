<!DOCTYPE html>
<html lang="es" class="no-js">
  <head>
    
    
    
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Archivo con apuntes de programación de Hector Costa Guzman.">
      
      <link rel="canonical" href="https://hektorprofe.github.io/docs/graficos-3d/26-renderizado-y-debug-separado/">
      
        <meta name="author" content="Héctor Costa Guzman">
      
      <link rel="shortcut icon" href="/favicon.ico">
    
    
      
        <title>Renderizado y debug por separado | Programación de gráficos 3D | Hektor Profe</title>
      
    
    <link rel="stylesheet"
          href="../../assets/stylesheets/application.2.css">
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet"
              href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    
    <link rel="stylesheet"
          href="https://hektorprofe.github.io/docs/assets/stylesheets/tingle.min.css">
    <style>
@font-face{font-family:"Material Icons";font-style:normal;font-weight:400;src:local("Material Icons"),local("MaterialIcons-Regular"),url("https://hektorprofe.github.io/docs/assets/fonts/specimen/MaterialIcons-Regular.woff2") format("woff2"),url("https://hektorprofe.github.io/docs/assets/fonts/specimen/MaterialIcons-Regular.woff") format("woff"),url("https://hektorprofe.github.io/docs/assets/fonts/specimen/MaterialIcons-Regular.ttf") format("truetype")}
[data-md-color-primary="grey"] .md-header { background-color: #191A1D }
[data-md-color-primary="grey"] .md-tabs { background-color: #222831 }
.md-footer-nav { background-color: #222831; }
.md-footer-meta { background-color: #191A1D }
html [data-md-color-primary="grey"] .md-nav--primary .md-nav__title--site { background-color: #191A1D; }
.mini{ display: none; } .maxi{ display: block; }
.embed-container { position: relative; padding-bottom: 56.25%;height: 0; overflow: hidden; max-width: 100%; height: auto; margin-bottom: 0; } 
.embed-container iframe, .embed-container object, .embed-container embed { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
.md-nav__link:focus, .md-nav__link:hover { color: #018dc5; }
.headerlink{ color: #018dc5 !important; }
.md-footer-links__highlight a{ color: #777 !important; }
.md-footer-links__highlight a:hover{ color: #ddd !important; }
.visible{ display: inherit !important; }
/*.md-tabs { display: none !important; }*/
.nav__btn, .nav__logo{ transition: 0.3s; }
.nav__btn:hover{ color: #aaa; }
.nav__logo:hover{ opacity:.7; }
.nav__logo {max-width: 225px !important; }
img:not([src]){visibility:hidden;}
img.click{opacity: 0.96;box-shadow:rgb(79, 82, 92) -4px 4px}
img.click:hover{opacity: 1;box-shadow:rgb(10, 172, 237) -4px 4px}
.button { background-color: #36bf2d; border: none; color: white !important; padding: 20px 0px; text-align: center; text-decoration: none; display: block; font-size: 97%; width: 100%; font-weight: bold;}
.button:hover { background-color: #4CAF50; color: white; }
.animated.delay-1dot5s {animation-delay: 1.5s;}
.md-icon--search { display:inline-block!important}
a.headerlink{ display: none !important; }
small.edited { display: block; text-align: right; }
div.my-img{text-align:center;margin-top:20px}
@media (max-width: 76.1875em){ .mini{ display: block; } .maxi{ display: none;} /*.md-nav__link[for="nav-1"] { display: none; }*/ }
@media (min-width: 1599.9px){ .md-header-nav__button.md-logo img { height: 37.5px !important; width: 220px; } }
@media (min-width: 1999.9px){ .md-header-nav__button.md-logo img { height: 40px !important; width: 240px; } }
/* Rectificación footer en paginas pequeñas de altura */
@media (max-width: 1599.8px){ .md-container {height: calc(100% - 48px)} }
@media (min-width: 1599.9px){ .md-container {height: calc(100% - 53px)} }
@media (min-width: 1999.9px){ .md-container {height: calc(100% - 58px)} }
@media only screen and (max-width: 959.9px) { .nav__logo { display: block !important; }} 
@media only screen and (min-width: 960px) and (max-width: 76.1875em) { .nav__logo { display: block !important; }} 
@media only screen and (min-width: 76.1875em) { .nav__logo { display: none !important; } } 
@media only screen and (max-width: 76.1875em) { .md-sidebar--primary { left: -26.2rem;; width: 26.2rem; }  [data-md-toggle="drawer"]:checked ~ .md-container .md-sidebar--primary { -webkit-transform: translateX(26.2rem); transform: translateX(26.2rem); } [dir="rtl"] [data-md-toggle="drawer"]:checked ~ .md-container .md-sidebar--primary { -webkit-transform: translateX(-26.2rem); transform: translateX(-26.2rem); } }
@media (min-width: 1219.9px){ #home__btn { display: none !important; } #cursos__btn{ color: white !important; } [data-md-color-primary="grey"] .md-nav__link--active{ color: rgba(0, 0, 0, 0.87); text-decoration: underline !important; } }
@media (min-width: 467.9px){ #discord__btn{ display: inline-block !important; } }
@media only screen and (min-width: 60em){ .md-search__input { background-color: rgb(53, 54, 56); } .md-search__input:hover { background-color: rgb(84, 87, 93); color: white; }}
@media (max-width: 1219.9px){ .md-header-nav__title{ padding: 0 1rem; } .nav__btn {display:none;} }
@media (max-width: 875.9px){ #cookie-bar-button{ margin-top: 20px !important; }}
@media (max-width: 719.9px){ #cookie-bar { padding: 3.25rem 1.25rem; }}
@media (max-width: 512.9px){ #cookie-bar { padding: 2rem 1.25rem; }}

.tingle-modal { font-size:18px !important;}
.tingle-modal-box{ width: 80%; max-width: 1100px; }
.tingle-btn--danger{ background: darkorange !important; }
.tingle-modal-box__content { padding: 3rem 2rem 3rem 3rem;}
@media (max-width: 540px){ .tingle-modal-box{ width: auto; } }
@media (max-width: 849px){ #supermodal{ grid-template-columns:100% !important; }}

.md-sidebar--secondary .md-sidebar__scrollwrap {max-height: calc(100% - 275px - 60px)}
@media (max-width: 1999.9px){.md-sidebar--secondary .md-sidebar__scrollwrap {max-height: calc(100% - 246px - 60px);margin-right:-1px;}}
@media (max-width: 1599.9px){.md-sidebar--secondary .md-sidebar__scrollwrap {max-height: calc(100% - 222px - 60px)}}

    </style>
  </head>
  
    
    
    <body dir="ltr"
          data-md-color-primary="grey"
          data-md-color-accent="grey">
    
      <input class="md-toggle"
             data-md-toggle="drawer"
             type="checkbox"
             id="__drawer"
             autocomplete="off">
      <input class="md-toggle"
             data-md-toggle="search"
             type="checkbox"
             id="__search"
             autocomplete="off">
      <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
      
        <a href="#renderizado-y-debug-por-separado"
           tabindex="1"
           class="md-skip">Saltar a contenido</a>
      
      
        <header class="md-header"
        data-md-component="header"
        style="position: inherit !important">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://hektorprofe.github.io/docs/"
           title="Archivo - Archivo de Hektor Profe Docs"
           class="md-header-nav__button md-logo"
           style="font-size: 0px">
          <img src="https://hektorprofe.github.io/docs/assets/images/logo.png"
               width="200px"
               height="35px"
               style="margin-top: -5px"
               alt="Hektor Profe"
               title="Hektor Profe" />
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title"
             data-md-component="title"
             style="text-align: right">
          <a class="nav__btn"
             href="https://hektorprofe.github.io/docs/"
             style="margin-left:1.4em"
             title="Buscador de documentos">Buscador</a>
          <a href="https://hektorprofe.github.io/docs/">
            <img class="nav__logo"
                 src="https://hektorprofe.github.io/docs/assets/images/logo.png"
                 width="200px"
                 height="35px"
                 style="margin: 6px auto 0"
                 alt="Hektor Profe"
                 title="Hektor Profe" />
          </a>
        </div>
        <style>
          .md-sidebar[data-md-state="lock"] {
            top: 0rem !important;
          }
          .md-tabs {
            display: none !important;
          }
          .hde {
            display: inline-block;
          }
          .admonition.note > .superfences-tabs > label:hover,
          .headerlink {
            color: #018dc5 !important;
          }
          .admonition.info {
            font-size: 100%;
          }
          .admonition.info label {
            font-size: 91%;
          }
          .admonition.note > .admonition-title {
            display: none;
          }
          .image {
            text-align: center;
            margin-top: 25px;
          }
          .contenedor_youtube {
            position: relative !important;
            padding-bottom: 56.25% !important; /*panorámico*/
            padding-top: 0px !important;
            height: 0 !important;
            margin-top: -20px;
            margin-bottom: 25px;
          }
          .contenedor_youtube iframe {
            position: absolute !important;
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: 100% !important;
          }
        </style>
      </div>
    </div>
  </nav>
</header>
      
      <div class="md-container" style="padding-top: 0px !important;">
        
          
        
        
          

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list" id="top__tabs">
        
          <li class="md-tabs__item"><a href="javascript://" class="md-tabs__link">&nbsp;</a></li>
        
          <li class="md-tabs__item"><a href="javascript://" class="md-tabs__link">&nbsp;</a></li>
        
          <li class="md-tabs__item"><a href="javascript://" class="md-tabs__link">&nbsp;</a></li>
        
          <li class="md-tabs__item"><a href="javascript://" class="md-tabs__link">&nbsp;</a></li>
        
          <li class="md-tabs__item"><a href="javascript://" class="md-tabs__link">&nbsp;</a></li>
        
          <li class="md-tabs__item"><a href="javascript://" class="md-tabs__link">&nbsp;</a></li>
        
          <li class="md-tabs__item"><a href="javascript://" class="md-tabs__link">&nbsp;</a></li>
        
          <li class="md-tabs__item"><a href="javascript://" class="md-tabs__link">&nbsp;</a></li>
        
          <li class="md-tabs__item"><a href="javascript://" class="md-tabs__link">&nbsp;</a></li>
        
          <li class="md-tabs__item"><a href="javascript://" class="md-tabs__link">&nbsp;</a></li>
        
          <li class="md-tabs__item"><a href="javascript://" class="md-tabs__link">&nbsp;</a></li>
        
          <li class="md-tabs__item"><a href="javascript://" class="md-tabs__link">&nbsp;</a></li>
        
          <li class="md-tabs__item"><a href="javascript://" class="md-tabs__link">&nbsp;</a></li>
        
      </ul>
    </div>
</nav>
        
        <main class="md-main">
          <div class="md-main__inner md-grid"
               data-md-component="container"
               style="padding-top: 8px !important">
            
              
                <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                  <div class="md-sidebar__scrollwrap" id="md__sidebar__scroll">
                    <div class="md-sidebar__inner"><nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title" for="__drawer" style="padding:0 !important;max-height:5.5rem;"></label>
  
  <ul class="md-nav__list" id="main__list" data-md-scrollfix>
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
        <!-- comprobación extra -->
         
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8" checked>
    
    <label class="md-nav__link" for="nav-8">
      Apuntes de Gráficos 3D
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Apuntes de Gráficos 3D
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
            
            
            


  <li class="md-nav__item">
    <a href="../" title="Índice del archivo" class="md-nav__link">
      Índice del archivo
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../01-configuracion-previa/" title="Configuración previa" class="md-nav__link">
      Configuración previa
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../02-buffer-de-color/" title="Buffer de color" class="md-nav__link">
      Buffer de color
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../03-vectores-y-puntos/" title="Vectores y puntos" class="md-nav__link">
      Vectores y puntos
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../04-proyeccion-de-puntos/" title="Proyección de puntos" class="md-nav__link">
      Proyección de puntos
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../05-transformaciones-lineales/" title="Transformaciones lineales" class="md-nav__link">
      Transformaciones lineales
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../06-triangulos-vertices-mallas/" title="Triángulos, vértices y mallas" class="md-nav__link">
      Triángulos, vértices y mallas
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../07-rasterizacion-de-lineas/" title="Rasterización de líneas" class="md-nav__link">
      Rasterización de líneas
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../08-mallas-en-memoria-dinamica/" title="Mallas en memoria dinámica" class="md-nav__link">
      Mallas en memoria dinámica
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../09-ficheros-con-modelos-obj/" title="Ficheros con modelos OBJ" class="md-nav__link">
      Ficheros con modelos OBJ
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../10-operaciones-con-vectores/" title="Operaciones con vectores" class="md-nav__link">
      Operaciones con vectores
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../11-back-face-culling/" title="Back-face Culling" class="md-nav__link">
      Back-face Culling
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../12-rasterizacion-de-triangulos/" title="Rasterización de triángulos" class="md-nav__link">
      Rasterización de triángulos
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../13-interfaz-dear-imgui/" title="Interfaz Dear ImGui" class="md-nav__link">
      Interfaz Dear ImGui
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../14-ordenar-caras-por-profundidad/" title="Ordenar caras por profundidad" class="md-nav__link">
      Ordenar caras por profundidad
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../15-operaciones-con-matrices/" title="Operaciones con matrices" class="md-nav__link">
      Operaciones con matrices
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../16-matrices-de-transformacion-3d/" title="Matrices de transformación 3D" class="md-nav__link">
      Matrices de transformación 3D
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../17-matriz-de-proyeccion/" title="Matriz de proyección" class="md-nav__link">
      Matriz de proyección
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../18-luz-y-sombreado/" title="Luz y sombreado" class="md-nav__link">
      Luz y sombreado
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../19-migracion-a-visual-studio/" title="Migración a Visual Studio" class="md-nav__link">
      Migración a Visual Studio
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../20-mapeado-de-texturas/" title="Mapeado de texturas" class="md-nav__link">
      Mapeado de texturas
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../21-interpolacion-de-perspectiva/" title="Interpolación de perspectiva" class="md-nav__link">
      Interpolación de perspectiva
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../22-decodificacion-de-ficheros-png/" title="Decodificación de ficheros PNG" class="md-nav__link">
      Decodificación de ficheros PNG
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../23-ficheros-obj-con-texturas/" title="Ficheros OBJ con texturas" class="md-nav__link">
      Ficheros OBJ con texturas
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../24-profundidad-con-z-buffer/" title="Profundidad con Z-Buffer" class="md-nav__link">
      Profundidad con Z-Buffer
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../25-matriz-de-vista-y-camara/" title="Matriz de vista y cámaras" class="md-nav__link">
      Matriz de vista y cámaras
    </a>
  </li>

        
            
            
            

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
    <a href="./" title="Renderizado y debug separado" class="md-nav__link md-nav__link--active" id="md__active_link">
      Renderizado y debug separado
    </a>
    
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../27-clipping/" title="Clipping" class="md-nav__link">
      Clipping
    </a>
  </li>

        
            
            
            


  <li class="md-nav__item">
    <a href="../28-multiples-mallas/" title="Múltiples mallas" class="md-nav__link">
      Múltiples mallas
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      
    
      
    
      
    
      
    
      
    
      
    
  </ul>
</nav>
</div>
                  </div>
                </div>
              
              
                <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                  <div class="md-sidebar__scrollwrap">
                    <div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
</nav></div>
                  </div>
                </div>
              
            
            <div class="md-content">
              <article class="md-content__inner md-typeset">
                
                  
                  
                  <h1 id="renderizado-y-debug-por-separado">Renderizado y debug por separado<a class="headerlink" href="#renderizado-y-debug-por-separado" title="Permanent link">&para;</a></h1>
<p>En este bloque mi objetivo es separar el renderizado y el debug para que los eventos como hacer clic no se molesten mútuamente. Con esto podré mejorar la funcionalidad de <code>mouseClicked</code> y conseguir un resultado más óptimo.</p>
<p>Para separar espacios voy a crear diferentes espacios de <code>Dear ImGuI</code> y ya que estoy también un menú:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Iniciamos un Frame de Imgui</span>
<span class="n">ImGui_ImplSDLRenderer_NewFrame</span><span class="p">();</span>
<span class="n">ImGui_ImplSDL2_NewFrame</span><span class="p">(</span><span class="n">window</span><span class="p">);</span>
<span class="n">ImGui</span><span class="o">::</span><span class="n">NewFrame</span><span class="p">();</span>

<span class="c1">// Top menú bar</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ImGui</span><span class="o">::</span><span class="n">BeginMainMenuBar</span><span class="p">())</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ImGui</span><span class="o">::</span><span class="n">BeginMenu</span><span class="p">(</span><span class="s">&quot;Archivo&quot;</span><span class="p">))</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ImGui</span><span class="o">::</span><span class="n">MenuItem</span><span class="p">(</span><span class="s">&quot;Salir&quot;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="n">ImGui</span><span class="o">::</span><span class="n">EndMenu</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">ImGui</span><span class="o">::</span><span class="n">EndMainMenuBar</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// Rendering window</span>
<span class="n">ImGui</span><span class="o">::</span><span class="n">Begin</span><span class="p">(</span><span class="s">&quot;Rendering&quot;</span><span class="p">);</span>
<span class="n">ImGui</span><span class="o">::</span><span class="n">Image</span><span class="p">(</span><span class="n">colorBufferTexture</span><span class="p">,</span><span class="w"> </span><span class="n">ImVec2</span><span class="p">(</span><span class="mi">900</span><span class="p">,</span><span class="w"> </span><span class="mi">600</span><span class="p">));</span>
<span class="n">ImGui</span><span class="o">::</span><span class="n">End</span><span class="p">();</span>

<span class="c1">// Debug window</span>
<span class="n">ImGui</span><span class="o">::</span><span class="n">Begin</span><span class="p">(</span><span class="s">&quot;Debugging&quot;</span><span class="p">);</span>
<span class="n">ImGui</span><span class="o">::</span><span class="n">Checkbox</span><span class="p">(</span><span class="s">&quot;Limitar FPS&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">enableCap</span><span class="p">);</span>
<span class="c1">//...</span>
<span class="n">ImGui</span><span class="o">::</span><span class="n">End</span><span class="p">();</span>

<span class="c1">// End Frame</span>
<span class="n">ImGui</span><span class="o">::</span><span class="n">EndFrame</span><span class="p">();</span>
</code></pre></div>
<p>El punto interesante es que en la ventana de rendering lo que hacemos es dibujar una imagen con precisamente el <code>colorBufferTexture</code>. Para que no lo dibuje dos veces lo único que debemos hacer es durante el <code>RenderColorBuffer</code> no copiar la textura al renderer principal:</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">Window::RenderColorBuffer</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">SDL_UpdateTexture</span><span class="p">(</span><span class="n">colorBufferTexture</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">colorBuffer</span><span class="p">,</span><span class="w"> </span><span class="n">windowWidth</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">uint32_t</span><span class="p">));</span>
<span class="w">    </span><span class="c1">//SDL_RenderCopy(renderer, colorBufferTexture, NULL, NULL);</span>
<span class="p">}</span>
</code></pre></div>
<p>En este punto me interesa que los buffers de color y profundidad tengan un tamaño más pequeño, o que en última instancia quizá en el futuro, se adapten al tamaño de la ventana interior. Por eso voy a crear dos variables para controlar ese tamaño:</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Window</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">rendererWidth</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">rendererHeight</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>
<p>Por ahora las estableceré en el constructor de la ventana, también aprovecharé para establecer el <code>aspectRatio</code> con la proporción de la ventana raíz y recalcuilar la matriz de proyección:</p>
<div class="highlight"><pre><span></span><code><span class="n">Window</span><span class="p">()</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">windowWidth</span><span class="p">(</span><span class="mi">1280</span><span class="p">),</span><span class="w"> </span><span class="n">windowHeight</span><span class="p">(</span><span class="mi">720</span><span class="p">),</span><span class="w"> </span><span class="n">rendererWidth</span><span class="p">(</span><span class="mi">960</span><span class="p">),</span><span class="w"> </span><span class="n">rendererHeight</span><span class="p">(</span><span class="mi">640</span><span class="p">)</span><span class="w"> </span>
<span class="p">{</span>
<span class="w">    </span><span class="n">aspectRatio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rendererHeight</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">rendererWidth</span><span class="p">);</span>
<span class="w">    </span><span class="n">projectionMatrix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Matrix4</span><span class="o">::</span><span class="n">PerspectiveMatrix</span><span class="p">(</span><span class="n">fovFactor</span><span class="p">,</span><span class="w"> </span><span class="n">aspectRatio</span><span class="p">,</span><span class="w"> </span><span class="n">zNear</span><span class="p">,</span><span class="w"> </span><span class="n">zFar</span><span class="p">);</span>
<span class="p">};</span>
</code></pre></div>
<p>Estos nuevos tamaños serán los que utilizaré en lugar de <code>windowWidth</code> y <code>windowHeight</code> en todo el fichero <code>window.cpp</code>, así que <strong>refactorizaré ambos campos para cambiarles el nombre</strong> excepto al momento de crear la ventana que conservaremos los tamaños iniciales:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Creamos la ventana SDL</span>
<span class="n">SDL_WindowFlags</span><span class="w"> </span><span class="n">window_flags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">SDL_WindowFlags</span><span class="p">)(</span><span class="n">SDL_WINDOW_RESIZABLE</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">SDL_WINDOW_ALLOW_HIGHDPI</span><span class="p">);</span><span class="w"> </span><span class="c1">// SDL_WINDOW_BORDERLESS</span>
<span class="n">window</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SDL_CreateWindow</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;3D Renderer&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">SDL_WINDOWPOS_CENTERED</span><span class="p">,</span><span class="w"> </span><span class="n">SDL_WINDOWPOS_CENTERED</span><span class="p">,</span><span class="w"> </span><span class="n">windowWidth</span><span class="p">,</span><span class="w"> </span><span class="n">windowHeight</span><span class="p">,</span><span class="w"> </span><span class="n">window_flags</span><span class="p">);</span>
</code></pre></div>
<p>Por supuesto no olvidemos cambiar el tamaño harcodeado de la imagen en la subventana del rendering:</p>
<div class="highlight"><pre><span></span><code><span class="n">ImGui</span><span class="o">::</span><span class="n">Image</span><span class="p">(</span><span class="n">colorBufferTexture</span><span class="p">,</span><span class="w"> </span><span class="n">ImVec2</span><span class="p">(</span><span class="n">rendererWidth</span><span class="p">,</span><span class="w"> </span><span class="n">rendererHeight</span><span class="p">));</span>
</code></pre></div>
<p>Ni tampoco las rectificaciones de posición una vez proyectados los vértices y las normales en el <code>mesh.cpp</code>:</p>
<div class="highlight"><pre><span></span><code><span class="cm">/*** Apply projections and lighting for all face vertices ***/</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="c1">// Project the current vertex using matrices</span>
<span class="w">    </span><span class="n">triangles</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">ProjectWorldVertex</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="w"> </span><span class="n">window</span><span class="o">-&gt;</span><span class="n">projectionMatrix</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// First scale the projected vertex by screen sizes</span>
<span class="w">    </span><span class="n">triangles</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">projectedVertices</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">x</span><span class="w"> </span><span class="o">*=</span><span class="w"> </span><span class="p">(</span><span class="n">window</span><span class="o">-&gt;</span><span class="n">rendererWidth</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2.0</span><span class="p">);</span>
<span class="w">    </span><span class="n">triangles</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">projectedVertices</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">y</span><span class="w"> </span><span class="o">*=</span><span class="w"> </span><span class="p">(</span><span class="n">window</span><span class="o">-&gt;</span><span class="n">rendererHeight</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2.0</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Invert the y values to account the flipped screen y coord</span>
<span class="w">    </span><span class="n">triangles</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">projectedVertices</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">y</span><span class="w"> </span><span class="o">*=</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// Then translate the projected vertex to the middle screen</span>
<span class="w">    </span><span class="n">triangles</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">projectedVertices</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">x</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="p">(</span><span class="n">window</span><span class="o">-&gt;</span><span class="n">rendererWidth</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2.0</span><span class="p">);</span>
<span class="w">    </span><span class="n">triangles</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">projectedVertices</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">y</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="p">(</span><span class="n">window</span><span class="o">-&gt;</span><span class="n">rendererHeight</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2.0</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Project the normal vectors if we want to draw it</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">window</span><span class="o">-&gt;</span><span class="n">drawTriangleNormals</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="c1">// Project the current normal to create an origin and a destiny vectors</span>
<span class="w">    </span><span class="n">triangles</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">ProjectWorldNormal</span><span class="p">(</span><span class="n">window</span><span class="o">-&gt;</span><span class="n">projectionMatrix</span><span class="p">);</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// First scale the projected vertex by screen sizes</span>
<span class="w">        </span><span class="n">triangles</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">projectedNormal</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">x</span><span class="w"> </span><span class="o">*=</span><span class="w"> </span><span class="p">(</span><span class="n">window</span><span class="o">-&gt;</span><span class="n">rendererWidth</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2.0</span><span class="p">);</span>
<span class="w">        </span><span class="n">triangles</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">projectedNormal</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">y</span><span class="w"> </span><span class="o">*=</span><span class="w"> </span><span class="p">(</span><span class="n">window</span><span class="o">-&gt;</span><span class="n">rendererHeight</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2.0</span><span class="p">);</span>
<span class="w">        </span><span class="c1">// Invert the y values to account the flipped screen y coord</span>
<span class="w">        </span><span class="n">triangles</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">projectedNormal</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">y</span><span class="w"> </span><span class="o">*=</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<span class="w">        </span><span class="c1">// Then translate the projected vertex to the middle screen</span>
<span class="w">        </span><span class="n">triangles</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">projectedNormal</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">x</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="p">(</span><span class="n">window</span><span class="o">-&gt;</span><span class="n">rendererWidth</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2.0</span><span class="p">);</span>
<span class="w">        </span><span class="n">triangles</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">projectedNormal</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">y</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="p">(</span><span class="n">window</span><span class="o">-&gt;</span><span class="n">rendererHeight</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2.0</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Por último, y es muy importante, desactivaremos el movimiento de las ventanas haciendo clic, sólo lo permitiremos arrastrando la barra de título:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Setup Dear ImGui context</span>
<span class="n">IMGUI_CHECKVERSION</span><span class="p">();</span>
<span class="n">ImGui</span><span class="o">::</span><span class="n">CreateContext</span><span class="p">();</span>
<span class="n">ImGuiIO</span><span class="o">&amp;</span><span class="w"> </span><span class="n">io</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ImGui</span><span class="o">::</span><span class="n">GetIO</span><span class="p">();</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">io</span><span class="p">;</span>
<span class="n">io</span><span class="p">.</span><span class="n">ConfigWindowsMoveFromTitleBarOnly</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
</code></pre></div>
<p>Con esto en principio tendremos las dos partes por separado:</p>
<p><img alt="" src="https://hektorprofe.github.io/docs/cdn/graficos3d/image-137.png" /></p>
<p>Por desgracia si hacemos clic en cualquier parte seguiremos modificando la cámara, pero ahora podemos hacer algo muy interesante. Podemos definir una variable para detectar si nuestra subventana se encuentra activa con el ratón encima:</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Window</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">rendererActive</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>
<p>Y durante la definición de la ventana con <code>ImGui</code> establecer su estado:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Rendering window</span>
<span class="n">ImGui</span><span class="o">::</span><span class="n">Begin</span><span class="p">(</span><span class="s">&quot;Rendering&quot;</span><span class="p">);</span>
<span class="n">ImGui</span><span class="o">::</span><span class="n">Image</span><span class="p">(</span><span class="n">colorBufferTexture</span><span class="p">,</span><span class="w"> </span><span class="n">ImVec2</span><span class="p">(</span><span class="n">rendererWidth</span><span class="p">,</span><span class="w"> </span><span class="n">rendererHeight</span><span class="p">));</span>
<span class="n">rendererActive</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ImGui</span><span class="o">::</span><span class="n">IsWindowFocused</span><span class="p">()</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">ImGui</span><span class="o">::</span><span class="n">IsWindowHovered</span><span class="p">();</span>
<span class="n">ImGui</span><span class="o">::</span><span class="n">End</span><span class="p">();</span>
</code></pre></div>
<p>Ahora podemos utilizar esto como condición para poder rotar la vista:</p>
<div class="highlight"><pre><span></span><code><span class="k">case</span><span class="w"> </span><span class="no">SDL_MOUSEMOTION</span><span class="p">:</span>
<span class="w">    </span><span class="c1">// Process rotation only if...</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mouseClicked</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">rendererActive</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
</code></pre></div>
<p>Y para moverla:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Process the WASD movement with a keyState map only if...</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rendererActive</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">uint8_t</span><span class="o">*</span><span class="w"> </span><span class="n">keystate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SDL_GetKeyboardState</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
</code></pre></div>
<p>Todavía quedan algunos bugs y se puede pulir más pero creo que empieza a dar el pego:</p>
<p><img alt="" src="https://hektorprofe.github.io/docs/cdn/graficos3d/anim-43.gif" /> </p>
<p>Algo que podemos hacer es que mientras se arrastra la subventana de <code>Rendering</code> tampoco se pueda interactuar con la cámara. Para ello podemos definir:</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Window</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">rendererDragged</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>
<p>Mientras establecemos la subventana, justo después del <code>ImGui::Begin</code> almacenaremos si el ratón se encuentra sobre la franja del título (el contextualizador funciona de esa forma):</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Rendering window</span>
<span class="n">ImGui</span><span class="o">::</span><span class="n">Begin</span><span class="p">(</span><span class="s">&quot;Rendering&quot;</span><span class="p">);</span>
<span class="n">rendererDragged</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ImGui</span><span class="o">::</span><span class="n">IsItemHovered</span><span class="p">();</span>
</code></pre></div>
<p>Luego lo utilizamos de condición como ya hicimos antes:</p>
<div class="highlight"><pre><span></span><code><span class="k">case</span><span class="w"> </span><span class="no">SDL_MOUSEMOTION</span><span class="p">:</span>
<span class="w">    </span><span class="c1">// Process rotation only if...</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mouseClicked</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">rendererActive</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="o">!</span><span class="n">rendererDragged</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1">// Process the WASD movement with a keyState map only if...</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rendererActive</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="o">!</span><span class="n">rendererDragged</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">uint8_t</span><span class="o">*</span><span class="w"> </span><span class="n">keystate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SDL_GetKeyboardState</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
</code></pre></div>
<p>Un último detalle que me gustaría implementar es la posibilidad de que la rueda de ratón pueda hacer zoom como pasa en editores como Unity. Tengo la costumbre de hacerlo y me sale de forma natural así que la voy a añadir a modo de incremento y decremento en el eje <code>z</code> de la cámara:</p>
<div class="highlight"><pre><span></span><code><span class="k">case</span><span class="w"> </span><span class="no">SDL_MOUSEWHEEL</span><span class="p">:</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rendererActive</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="o">!</span><span class="n">rendererDragged</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Scroll up</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="n">wheel</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="n">camera</span><span class="p">.</span><span class="n">forwardVelocity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">camera</span><span class="p">.</span><span class="n">direction</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">30.0</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">deltaTime</span><span class="p">;</span>
<span class="w">            </span><span class="n">camera</span><span class="p">.</span><span class="n">position</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">camera</span><span class="p">.</span><span class="n">forwardVelocity</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="c1">// Scroll down</span>
<span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="n">wheel</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="n">camera</span><span class="p">.</span><span class="n">forwardVelocity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">camera</span><span class="p">.</span><span class="n">direction</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">30.0</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">deltaTime</span><span class="p">;</span>
<span class="w">            </span><span class="n">camera</span><span class="p">.</span><span class="n">position</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="n">camera</span><span class="p">.</span><span class="n">forwardVelocity</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="c1">// Set the result moving positions into the camera interface</span>
<span class="w">        </span><span class="n">cameraPosition</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">camera</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
<span class="w">        </span><span class="n">cameraPosition</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">camera</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
<span class="w">        </span><span class="n">cameraPosition</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">camera</span><span class="p">.</span><span class="n">position</span><span class="p">.</span><span class="n">z</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">break</span><span class="p">;</span>
</code></pre></div>
<p>El resultado final es todo lo que podía esperar:</p>
<p><img alt="" src="https://hektorprofe.github.io/docs/cdn/graficos3d/anim-44.gif" /> </p>
<hr />
<p><small class="edited"><i>Última edición: 05 de Junio de 2022</i></small></p>
                  
                    
                  
                
                
                  


                
              </article>
            </div>
          </div>
        </main>
        
          
<footer class="md-footer">
  
  <div class="md-footer-nav">
    <nav class="md-footer-nav__inner md-grid">
      
      <a
        href="../25-matriz-de-vista-y-camara/"
        title="Matriz de vista y cámaras"
        class="md-flex md-footer-nav__link md-footer-nav__link--prev"
        rel="prev"
      >
        <div class="md-flex__cell md-flex__cell--shrink">
          <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
        </div>
        <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
          <span class="md-flex__ellipsis">
            <span class="md-footer-nav__direction">
              Anterior
            </span>
            Matriz de vista y cámaras
          </span>
        </div>
      </a>
       
      <a
        href="../27-clipping/"
        title="Clipping"
        class="md-flex md-footer-nav__link md-footer-nav__link--next"
        rel="next"
      >
        <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
          <span class="md-flex__ellipsis">
            <span class="md-footer-nav__direction">
              Siguiente
            </span>
            Clipping
          </span>
        </div>
        <div class="md-flex__cell md-flex__cell--shrink">
          <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
        </div>
      </a>
      
    </nav>
  </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        <!--<div class="md-footer-links__highlight">
          <a href="/comunidad/">Comunidad</a> · <a href="/politica-de-cookies/">Política de cookies</a> · <a href="/sobre-mi/">Sobre mí</a>
        </div>-->
        <div class="md-footer-copyright__highlight">
          2015 - 2022 &copy; Héctor Costa Guzmán (<u
            ><a
              href="https://creativecommons.org/licenses/by/4.0/deed.es"
              target="_blank"
              rel="nofollow"
              >Licencia CC BY 4.0</a
            ></u
          >)
        </div>
      </div>
       
<style>.md-footer-social__link {transition: 0.3s;}</style>
<div class="md-footer-social" style="font-size: 2.5rem; margin-top: -6px!important; padding: 0px!important; margin-bottom: -6px; overflow: hidden!important;">
  <a href="https://github.com/hcosta" title="Github" target="_blank" class="md-footer-social__link fa fa-github-square"></a>
  &nbsp;
</div>
 
    </div>
  </div>
  <script>
    (function (i, s, o, g, r, a, m) {
      i["GoogleAnalyticsObject"] = r;
      (i[r] =
        i[r] ||
        function () {
          (i[r].q = i[r].q || []).push(arguments);
        }),
        (i[r].l = 1 * new Date());
      (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m);
    })(
      window,
      document,
      "script",
      "https://www.google-analytics.com/analytics.js",
      "ga"
    );
    ga("create", "UA-124845547-1", "auto");
    ga("send", "pageview");
  </script>
</footer>
        
        <a id="anchorID" href="/docs/" target="_blank"></a>
      </div>
      <script type='text/javascript'
              src="https://hektorprofe.github.io/docs/assets/javascripts/application.a26c1c21.js"></script>
      <script src="https://hektorprofe.github.io/docs/assets/javascripts/tingle.min.js"></script>
      <script type='text/javascript'>
    app.initialize({version:"1.2.3",url:{base:"../.."}})
    var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.LazyLoad=e()}(this,function(){"use strict";function t(t,e,n){var o=e._settings;!n&&i(t)||(C(o.callback_enter,t),R.indexOf(t.tagName)>-1&&(N(t,e),I(t,o.class_loading)),E(t,e),a(t),C(o.callback_set,t))}var e={elements_selector:"img",container:document,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",class_loading:"loading",class_loaded:"loaded",class_error:"error",load_delay:0,callback_load:null,callback_error:null,callback_set:null,callback_enter:null,callback_finish:null,to_webp:!1},n=function(t){return _extends({},e,t)},o=function(t,e){return t.getAttribute("data-"+e)},r=function(t,e,n){var o="data-"+e;null!==n?t.setAttribute(o,n):t.removeAttribute(o)},a=function(t){return r(t,"was-processed","true")},i=function(t){return"true"===o(t,"was-processed")},s=function(t,e){return r(t,"ll-timeout",e)},c=function(t){return o(t,"ll-timeout")},l=function(t){return t.filter(function(t){return!i(t)})},u=function(t,e){return t.filter(function(t){return t!==e})},d=function(t,e){var n,o=new t(e);try{n=new CustomEvent("LazyLoad::Initialized",{detail:{instance:o}})}catch(t){(n=document.createEvent("CustomEvent")).initCustomEvent("LazyLoad::Initialized",!1,!1,{instance:o})}window.dispatchEvent(n)},f=function(t,e){return e?t.replace(/\.(jpe?g|png)/gi,".webp"):t},_="undefined"!=typeof window,v=_&&!("onscroll"in window)||/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),g=_&&"IntersectionObserver"in window,h=_&&"classList"in document.createElement("p"),b=_&&function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))&&0===t.toDataURL("image/webp").indexOf("data:image/webp")}(),m=function(t,e,n,r){for(var a,i=0;a=t.children[i];i+=1)if("SOURCE"===a.tagName){var s=o(a,n);p(a,e,s,r)}},p=function(t,e,n,o){n&&t.setAttribute(e,f(n,o))},y=function(t,e){var n=b&&e.to_webp,r=o(t,e.data_src),a=o(t,e.data_bg);if(r){var i=f(r,n);t.style.backgroundImage='url("'+i+'")'}if(a){var s=f(a,n);t.style.backgroundImage=s}},w={IMG:function(t,e){var n=b&&e.to_webp,r=e.data_srcset,a=t.parentNode;a&&"PICTURE"===a.tagName&&m(a,"srcset",r,n);var i=o(t,e.data_sizes);p(t,"sizes",i);var s=o(t,r);p(t,"srcset",s,n);var c=o(t,e.data_src);p(t,"src",c,n)},IFRAME:function(t,e){var n=o(t,e.data_src);p(t,"src",n)},VIDEO:function(t,e){var n=e.data_src,r=o(t,n);m(t,"src",n),p(t,"src",r),t.load()}},E=function(t,e){var n=e._settings,o=t.tagName,r=w[o];if(r)return r(t,n),e._updateLoadingCount(1),void(e._elements=u(e._elements,t));y(t,n)},I=function(t,e){h?t.classList.add(e):t.className+=(t.className?" ":"")+e},L=function(t,e){h?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\s+)"+e+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")},C=function(t,e){t&&t(e)},O=function(t,e,n){t.addEventListener(e,n)},k=function(t,e,n){t.removeEventListener(e,n)},x=function(t,e,n){O(t,"load",e),O(t,"loadeddata",e),O(t,"error",n)},A=function(t,e,n){k(t,"load",e),k(t,"loadeddata",e),k(t,"error",n)},z=function(t,e,n){var o=n._settings,r=e?o.class_loaded:o.class_error,a=e?o.callback_load:o.callback_error,i=t.target;L(i,o.class_loading),I(i,r),C(a,i),n._updateLoadingCount(-1)},N=function(t,e){var n=function n(r){z(r,!0,e),A(t,n,o)},o=function o(r){z(r,!1,e),A(t,n,o)};x(t,n,o)},R=["IMG","IFRAME","VIDEO"],S=function(e,n,o){t(e,o),n.unobserve(e)},M=function(t){var e=c(t);e&&(clearTimeout(e),s(t,null))},j=function(t,e,n){var o=n._settings.load_delay,r=c(t);r||(r=setTimeout(function(){S(t,e,n),M(t)},o),s(t,r))},D=function(t){return t.isIntersecting||t.intersectionRatio>0},T=function(t){return{root:t.container===document?null:t.container,rootMargin:t.thresholds||t.threshold+"px"}},U=function(t,e){this._settings=n(t),this._setObserver(),this._loadingCount=0,this.update(e)};return U.prototype={_manageIntersection:function(t){var e=this._observer,n=this._settings.load_delay,o=t.target;n?D(t)?j(o,e,this):M(o):D(t)&&S(o,e,this)},_onIntersection:function(t){t.forEach(this._manageIntersection.bind(this))},_setObserver:function(){g&&(this._observer=new IntersectionObserver(this._onIntersection.bind(this),T(this._settings)))},_updateLoadingCount:function(t){this._loadingCount+=t,0===this._elements.length&&0===this._loadingCount&&C(this._settings.callback_finish)},update:function(t){var e=this,n=this._settings,o=t||n.container.querySelectorAll(n.elements_selector);this._elements=l(Array.prototype.slice.call(o)),!v&&this._observer?this._elements.forEach(function(t){e._observer.observe(t)}):this.loadAll()},destroy:function(){var t=this;this._observer&&(this._elements.forEach(function(e){t._observer.unobserve(e)}),this._observer=null),this._elements=null,this._settings=null},load:function(e,n){t(e,this,n)},loadAll:function(){var t=this;this._elements.forEach(function(e){t.load(e)})}},_&&function(t,e){if(e)if(e.length)for(var n,o=0;n=e[o];o+=1)d(t,n);else d(t,e)}(U,window.lazyLoadOptions),U});
      </script>
    </body>
  </html>